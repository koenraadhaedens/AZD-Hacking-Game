name: cohack-project
metadata:
  description: Azure project for deploying a virtual network, managed identity, custom roles, and a virtual machine.
  author: Your Name

services:
  infra:
    type: infra
    path: ./infra/main.bicep
    target: subscription

variables:
  location: northeurope
  adminUsername: cohackadmin
  customRoleName: Resource Policy Contributor - Custom
  customRoleDescription: Custom role for managing resource policies.

parameters:
  location: $(location)
  adminUsername: $(adminUsername)
  adminPassword: $(ADMIN_PASSWORD)
  customRoleName: $(customRoleName)
  customRoleDescription: $(customRoleDescription)

environmentFiles:
  - .env

postprovision:
  # Run a script to perform additional configurations
  - bash ./scripts/setup.sh $(location)
